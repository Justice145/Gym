@model WebApplication1.Models.Branch

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>


@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>Branch</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.Address, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Address, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Address, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.PhoneNumber, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.PhoneNumber, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.PhoneNumber, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.WeekDayOpen, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.WeekDayOpen, new { htmlAttributes = new { @class = "form-control timepickeropen" } })
                @Html.ValidationMessageFor(model => model.WeekDayOpen, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.WeekDayClose, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.WeekDayClose, new { htmlAttributes = new { @class = "form-control timepickerclose" } })
                @Html.ValidationMessageFor(model => model.WeekDayClose, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.FridayOpen, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.FridayOpen, new { htmlAttributes = new { @class = "form-control timepickeropen" } })
                @Html.ValidationMessageFor(model => model.FridayOpen, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.FridayClose, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.FridayClose, new { htmlAttributes = new { @class = "form-control timepickerclose" } })
                @Html.ValidationMessageFor(model => model.FridayClose, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.SaturdayOpen, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.SaturdayOpen, new { htmlAttributes = new { @class = "form-control timepickeropen" } })
                @Html.ValidationMessageFor(model => model.SaturdayOpen, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.SaturdayClose, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.SaturdayClose, new { htmlAttributes = new { @class = "form-control timepickerclose" } })
                @Html.ValidationMessageFor(model => model.SaturdayClose, "", new { @class = "text-danger" })
            </div>
        </div>

		<div class="form-group">
	        @Html.LabelFor(model => model.Lat, htmlAttributes: new { @class = "control-label col-md-2" })
	        <div class="col-md-10">
	            @Html.EditorFor(model => model.Lat, new { htmlAttributes = new { @class = "form-control" } })
	            @Html.ValidationMessageFor(model => model.Lat, "", new { @class = "text-danger" })
	        </div>
	    </div>

	    <div class="form-group">
	        @Html.LabelFor(model => model.Lng, htmlAttributes: new { @class = "control-label col-md-2" })
	        <div class="col-md-10">
	            @Html.EditorFor(model => model.Lng, new { htmlAttributes = new { @class = "form-control" } })
	            @Html.ValidationMessageFor(model => model.Lng, "", new { @class = "text-danger" })
	        </div>
	    </div>
		
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Create" class="btn btn-default" />
            </div>
        </div>
    </div>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <link rel="stylesheet" type="text/css" href="/timepicker/jquery.timepicker.css" />
    <script src="/timepicker/jquery.timepicker.js"></script>
    <script>
            $('.timepickeropen').timepicker({
        timeFormat: 'HH:mm',
        interval: 60,
        minTime: '06:00',
        maxTime: '11:00',
        defaultTime: '09:00',
        startTime: '06:00',
        dynamic: true,
        dropdown: true,
        scrollbar: true
            });

                $('.timepickerclose').timepicker({
        timeFormat: 'HH:mm',
        interval: 60,
        minTime: '16:00',
        maxTime: '23:00',
        defaultTime: '21:00',
        startTime: '17:00',
        dynamic: true,
        dropdown: true,
        scrollbar: true
        });
    </script>
    <script>

    $(document).ready(function() {
        $('#mybutton').click(function () {
        var form = $('#__AjaxAntiForgeryForm');
        var token = $('input[name="__RequestVerificationToken"]', form).val();
        var classes = [];
        $('#classdiv input:checked').each(function() {
            classes.push(this.name);
        });

        // now names contains all of the names of checked checkboxes
        // do something with it for excamle post with ajax
        $.ajax({
            url: '@Url.Action("Search", "Branches")',
            type: 'POST',
            data: {
                __RequestVerificationToken: token, classNames: classes, wdOpen: $('#wdOpen').val(),
                wdClose: $('#wdClose').val(), fridayOpen: $('#fridayOpen').val(),
                fridayClose: $('#fridayClose').val(), saturdayOpen: $('#saturdayOpen').val(),
                saturdayClose: $('#saturdayClose').val()
            },
            success: function (response) {
                if (response.result == 'Redirect')
                    window.location = response.url;
            },
            error: function (result) {
                alert("error!");
            }
        });   //end ajax
    });
});
    </script>
}
